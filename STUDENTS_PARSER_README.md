# –ü–∞—Ä—Å–µ—Ä —É—á–∞—â–∏—Ö—Å—è –ù–î–¢–ü

–ü–∞—Ä—Å–µ—Ä –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —É—á–∞—â–∏—Ö—Å—è –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –¥–µ—Ç—Å–∫–æ–≥–æ —Ç–µ—Ö–Ω–æ–ø–∞—Ä–∫–∞ —Å —Å–∞–π—Ç–∞ https://ndtp.by/schedule/

## –û–ø–∏—Å–∞–Ω–∏–µ

`StudentsParser` - —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —É—á–∞—â–∏—Ö—Å—è –ù–î–¢–ü —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞. –ü–∞—Ä—Å–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–∞–±–ª–∏—Ü—ã, —Å–ø–∏—Å–∫–∏, —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ –∫—ç—à –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîÑ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** —Å—Ç—Ä–∞–Ω–∏—Ü —Å —Ç–∞–π–º–∞—É—Ç–æ–º
- üìä **–ü–∞—Ä—Å–∏–Ω–≥ —Ç–∞–±–ª–∏—Ü** —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ —É—á–∞—â–∏—Ö—Å—è
- üìã **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–∏—Å–∫–æ–≤** (ul, ol) —Å –∏–º–µ–Ω–∞–º–∏
- üìù **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞** —É—á–∞—â–∏—Ö—Å—è –≤ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞—Ö
- üíæ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- üîç **–ü–æ–∏—Å–∫ —É—á–∞—â–∏—Ö—Å—è** –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ –≥—Ä—É–ø–ø–µ
- üìÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö
- üõ°Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

–ö–∞–∂–¥—ã–π —É—á–∞—â–∏–π—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ —Å–ª–æ–≤–∞—Ä—è:

```python
{
    "table_title": "–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã/–∏—Å—Ç–æ—á–Ω–∏–∫–∞",
    "row_number": 1,  # –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ (–º–æ–∂–µ—Ç –±—ã—Ç—å None)
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "group": "–ì—Ä—É–ø–ø–∞ –ê",  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
    "class": "10 –∫–ª–∞—Å—Å",  # –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
    "additional_info": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from students_parser import StudentsParser

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞
parser = StudentsParser()

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
success = await parser.update_students(force=True)

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—â–∏—Ö—Å—è
context = parser.get_students_context()
print(context)

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—á–∞—â–µ–≥–æ—Å—è
search_result = parser.get_students_context("–ò–≤–∞–Ω–æ–≤")
print(search_result)
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```python
from students_parser import get_students_context_async, force_update_students

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
await force_update_students()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
context = await get_students_context_async("–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å")
```

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```python
from students_parser import get_students_context

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
context = get_students_context("–ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å")
```

## –ú–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ StudentsParser

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

- `fetch_page()` - –ó–∞–≥—Ä—É–∂–∞–µ—Ç HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `parse_students_list(html_content)` - –ü–∞—Ä—Å–∏—Ç HTML –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —É—á–∞—â–∏—Ö—Å—è
- `update_students(force=False)` - –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —É—á–∞—â–∏—Ö—Å—è
- `get_students_context(query="")` - –ü–æ–ª—É—á–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è
- `get_students_summary()` - –ü–æ–ª—É—á–∞–µ—Ç –∫—Ä–∞—Ç–∫—É—é —Å–≤–æ–¥–∫—É

### –ú–µ—Ç–æ–¥—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

- `save_students_cache(data)` - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à
- `load_students_cache()` - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫—ç—à–∞
- `get_last_update_time()` - –ü–æ–ª—É—á–∞–µ—Ç –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `should_update(hours_threshold=24)` - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã

- `_parse_student_row(row, table_title)` - –ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É —Ç–∞–±–ª–∏—Ü—ã
- `_extract_student_from_text(text, source)` - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —É—á–∞—â–µ–≥–æ—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞
- `_format_student_info(student, index)` - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—á–∞—â–µ–º—Å—è

## –§–∞–π–ª—ã –¥–∞–Ω–Ω—ã—Ö

- `students_list.json` - –ö—ç—à —Å–æ —Å–ø–∏—Å–∫–æ–º —É—á–∞—â–∏—Ö—Å—è
- `last_students_update.txt` - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

## –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è

```
üìã –°–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è –ù–î–¢–ü

–í—Å–µ–≥–æ —É—á–∞—â–∏—Ö—Å—è: 150
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024-01-15T10:30:00

–ü–µ—Ä–≤—ã–µ 20 —É—á–∞—â–∏—Ö—Å—è:

1. [1] **–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á** - –ì—Ä—É–ø–ø–∞ –ê (10 –∫–ª–∞—Å—Å)
2. [2] **–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤–∏—á** - –ì—Ä—É–ø–ø–∞ –ë (11 –∫–ª–∞—Å—Å)
3. [3] **–°–∏–¥–æ—Ä–æ–≤ –°–∏–¥–æ—Ä –°–∏–¥–æ—Ä–æ–≤–∏—á** - –ì—Ä—É–ø–ø–∞ –í (9 –∫–ª–∞—Å—Å)
...
```

### –ü–æ–∏—Å–∫ –ø–æ –∑–∞–ø—Ä–æ—Å—É

```
üìã –°–ø–∏—Å–æ–∫ —É—á–∞—â–∏—Ö—Å—è –ù–î–¢–ü

–í—Å–µ–≥–æ —É—á–∞—â–∏—Ö—Å—è: 150
–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2024-01-15T10:30:00

–ù–∞–π–¥–µ–Ω–æ –ø–æ –∑–∞–ø—Ä–æ—Å—É '–ò–≤–∞–Ω–æ–≤': 3

1. [1] **–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á** - –ì—Ä—É–ø–ø–∞ –ê (10 –∫–ª–∞—Å—Å)
2. [45] **–ò–≤–∞–Ω–æ–≤–∞ –ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞** - –ì—Ä—É–ø–ø–∞ –î (11 –∫–ª–∞—Å—Å)
3. [78] **–ò–≤–∞–Ω–æ–≤—Å–∫–∏–π –ú–∏—Ö–∞–∏–ª –°–µ—Ä–≥–µ–µ–≤–∏—á** - –ì—Ä—É–ø–ø–∞ –ï (9 –∫–ª–∞—Å—Å)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:

```bash
python test_students_parser.py
```

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- ‚úÖ –ë–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–µ—Ä–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram –±–æ—Ç–æ–º –¥–æ–±–∞–≤—å—Ç–µ –≤ `bot.py`:

```python
from students_parser import get_students_context, force_update_students

# –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –∫–æ–º–∞–Ω–¥—ã
@bot.message_handler(commands=['students'])
async def handle_students_command(message):
    context = get_students_context()
    await bot.reply_to(message, context)

# –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –ø–æ–∏—Å–∫–∞
@bot.message_handler(func=lambda message: '—É—á–∞—â–∏–µ—Å—è' in message.text.lower())
async def handle_students_search(message):
    query = message.text.replace('—É—á–∞—â–∏–µ—Å—è', '').strip()
    context = get_students_context(query)
    await bot.reply_to(message, context)
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ü–∏–∫–ª:

```python
from students_parser import students_updater_loop

# –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞)
asyncio.create_task(students_updater_loop(24))
```

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü–∞—Ä—Å–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:

- üîÑ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö —Å–µ—Ç–∏
- ‚è∞ –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è
- üõ°Ô∏è –í–∞–ª–∏–¥–∞—Ü–∏—è HTML –¥–∞–Ω–Ω—ã—Ö
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üíæ Graceful fallback –Ω–∞ –∫—ç—à –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–∞—Ä—Å–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Python:

```python
import logging

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)
```

–£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- `INFO` - –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `WARNING` - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `ERROR` - –û—à–∏–±–∫–∏
- `DEBUG` - –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```txt
aiohttp>=3.8.0
beautifulsoup4>=4.9.0
asyncio
logging
json
datetime
typing
re
os
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü–∞—Ä—Å–µ—Ä —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ TechnoBot-DO.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∞–π—Ç https://ndtp.by/schedule/ –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

**–ê–≤—Ç–æ—Ä**: TechnoBot-DO Team  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 2024-01-15 