# TechnoBot-DO
 
 Телеграм-бот Национального детского технопарка (НДТ). Помогает пользователям: узнать о технопарке, посмотреть календарь смен, проверить списки, пройти профориентационный квиз, провести брейншторм идей проекта и связаться с консультантом. Язык общения — русский.
 
 - Стек: Python 3.10+, aiogram v3, aiohttp, опционально Redis для лимитов, интеграция с DeepSeek Chat API.
 - Архитектура модульная: отдельные модули для квиза, брейншторма, операторов (консультантов), парсеров и пр.
 
 Полный технический гид для разработчика: см. `docs/DEVELOPER_GUIDE.md`.
 
 ## Быстрый старт
 1) Проверьте версию Python:
 ```bash
 python3 --version
 ```
 
 2) Создайте и активируйте виртуальное окружение:
 ```bash
 python3 -m venv venv
 source venv/bin/activate
 ```
 
 3) Установите зависимости:
 ```bash
 python3 -m pip install --upgrade pip
 python3 -m pip install -r requirements.txt
 ```
 
 4) Создайте файл окружения `.env` в корне (см. ниже «Переменные окружения»).
 
 5) Запустите бота:
 ```bash
 python3 bot.py
 ```
 
 Быстрый запуск одной командой:
 ```bash
 source venv/bin/activate && python3 bot.py
 ```
 
 ## Переменные окружения
 Создайте файл `.env` в корне проекта (он игнорируется git):
 - TELEGRAM_BOT_TOKEN — токен Telegram-бота (обязательно)
 - DEEPSEEK_API_KEY — ключ для DeepSeek Chat API (если используете LLM)
 - ADMIN_IDS — список Telegram ID админов через запятую, например: `12345,67890`
 - REDIS_URL — URL Redis (опционально), например: `redis://localhost:6379/0`
 
 Пример `.env`:
 ```
 TELEGRAM_BOT_TOKEN=123456:ABC...
 DEEPSEEK_API_KEY=sk-...
 ADMIN_IDS=11111111,22222222
 REDIS_URL=redis://localhost:6379/0
 ```
 
 ## Команды бота
 Команды видны в «/» меню Telegram и дублируют действия инлайн-кнопок:
 - /start — приветствие и меню (ветвление по ролям: админ/оператор/пользователь)
 - /menu — главное меню
 - /calendar — календарь смен (если модуль доступен)
 - /quiz — профориентационный квиз (если модуль доступен)
 - /brainstorm — брейншторм идей (если модуль доступен)
 - /checklists — проверка списков (если модуль доступен)
 - /help — связь с консультантом (эскалация запроса оператору)
 
 ## Структура проекта (основное)
 - `bot.py` — точка входа, инициализация бота/диспетчера, middleware, регистрация команд, главное меню, callback-хендлеры.
 - `brainstorm_mod.py` — логика брейншторма (FSM, вопросы LLM, Markdown, кнопки старта/выхода).
 - `quiz_mod.py` — логика квиза (FSM, запуск по команде и по инлайн-кнопке, семафор LLM).
 - `operator_handler.py` — связь с консультантом/операторами, очередь и статусы.
 - `docs/DEVELOPER_GUIDE.md` — детальный документ для разработчика (архитектура, расширение, отладка и т.д.).
 - Другие модули (при наличии): парсеры, RAG, уведомления и пр.
 
 ## Разработка
 - Перед коммитом убедитесь, что бот запускается локально и базовые сценарии работают: /start, /menu, /help, /brainstorm, /quiz, /calendar, /checklists.
 - Придерживайтесь единообразного Markdown: только одинарные `*` и `_`. Для текста LLM используйте `md_fix()` (в `brainstorm_mod.py`).
 - Лимиты запросов реализованы через `HourlyLimitMiddleware`. С Redis — централизованно, без Redis — локальный fallback.
 
 ## Деплой
 - Любой способ, где процесс живет и перезапускается при падении (systemd, контейнеры и т.п.).
 - Перед деплоем убедитесь, что переменные окружения настроены.
 - По желанию — используйте внешний Redis, чтобы лимиты были общими для всех инстансов.
 
 ## Лицензия
 Проект внутренний. Если требуется, добавьте файл LICENSE.
 
 ---
 Подробности в `docs/DEVELOPER_GUIDE.md`. Вопросы — к владельцу проекта.